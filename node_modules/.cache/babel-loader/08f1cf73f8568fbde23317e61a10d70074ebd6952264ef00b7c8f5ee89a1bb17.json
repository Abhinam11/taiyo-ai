{"ast":null,"code":"var _jsxFileName = \"/Users/gauravsinghmehra/Downloads/taiyo-ai/src/Pages/Chart.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { useQuery } from \"react-query\";\nimport axios from \"axios\";\nimport \"leaflet/dist/leaflet.css\";\nimport ChartComponent from \"../Components/ChartComponent\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst getData = async () => {\n  const {\n    data\n  } = await axios.get(\"https://disease.sh/v3/covid-19/countries\");\n  const flattenedData = data.reduce((acc, curr) => acc.concat([curr]), []);\n  // const countryLatLng: { [key: string]: LatLngExpression } = {};\n  // data.forEach((item) => {\n  //   countryLatLng[item.countryInfo.iso2] = [\n  //     item.countryInfo.lat,\n  //     item.countryInfo.long,\n  //   ];\n  // });\n  // return flattenedData.map((item) => ({\n  //   ...item,\n  //   latlng: countryLatLng[item.countryInfo.iso2],\n  // }));\n  return flattenedData;\n};\nconst Chart = () => {\n  _s();\n  var _filteredData$3, _filteredData$4, _filteredData$5, _filteredData$6, _filteredData$7, _filteredData$8, _filteredData$9;\n  const {\n    data: allData,\n    isLoading\n  } = useQuery(\"countryData\", getData);\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [lat, setLat] = useState(null);\n  const [long, setLong] = useState(null);\n  const [filteredData, setFilteredData] = useState([]);\n  useEffect(() => {\n    const timerId = setTimeout(() => {\n      const filtered = allData === null || allData === void 0 ? void 0 : allData.filter(el => {\n        var _el$country;\n        return el === null || el === void 0 ? void 0 : (_el$country = el.country) === null || _el$country === void 0 ? void 0 : _el$country.toLowerCase().includes(searchTerm.toLowerCase());\n      });\n      setFilteredData(filtered || []);\n    }, 500);\n    if (filteredData.length === 1) {\n      var _filteredData$, _filteredData$$countr, _filteredData$2, _filteredData$2$count;\n      setLat((_filteredData$ = filteredData[0]) === null || _filteredData$ === void 0 ? void 0 : (_filteredData$$countr = _filteredData$.countryInfo) === null || _filteredData$$countr === void 0 ? void 0 : _filteredData$$countr.lat);\n      setLong((_filteredData$2 = filteredData[0]) === null || _filteredData$2 === void 0 ? void 0 : (_filteredData$2$count = _filteredData$2.countryInfo) === null || _filteredData$2$count === void 0 ? void 0 : _filteredData$2$count.long);\n    } else {\n      setLat(null);\n      setLong(null);\n    }\n    return () => clearTimeout(timerId);\n  }, [searchTerm, allData]);\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 12\n    }, this);\n  }\n  console.log(\"Data\", filteredData);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col bg-gray-800 justify-center items-center w-full h-100 px-4 py-14 gap-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      placeholder: \"Search By Country\",\n      value: searchTerm,\n      className: \"px-2 py-2 border rounded\",\n      onChange: e => setSearchTerm(e.target.value)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this), filteredData && filteredData.length === 1 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"border px-4 py-4 bg-white rounded flex-col gap-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: (_filteredData$3 = filteredData[0]) === null || _filteredData$3 === void 0 ? void 0 : _filteredData$3.country\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Active Cases: \", (_filteredData$4 = filteredData[0]) === null || _filteredData$4 === void 0 ? void 0 : _filteredData$4.active]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Recovered Cases: \", (_filteredData$5 = filteredData[0]) === null || _filteredData$5 === void 0 ? void 0 : _filteredData$5.recovered]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Deaths Cases: \", (_filteredData$6 = filteredData[0]) === null || _filteredData$6 === void 0 ? void 0 : _filteredData$6.deaths]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(ChartComponent, {\n        activeCases: (_filteredData$7 = filteredData[0]) === null || _filteredData$7 === void 0 ? void 0 : _filteredData$7.active,\n        recoveredCases: (_filteredData$8 = filteredData[0]) === null || _filteredData$8 === void 0 ? void 0 : _filteredData$8.recovered,\n        deathCases: (_filteredData$9 = filteredData[0]) === null || _filteredData$9 === void 0 ? void 0 : _filteredData$9.deaths\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"No data Found.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col bg-gray-800 text-white justify-center items-center w-full h-100\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 95,\n    columnNumber: 5\n  }, this);\n};\n_s(Chart, \"DBaWeV9/6nMOV4N/X5jLysoGm0A=\", false, function () {\n  return [useQuery];\n});\n_c = Chart;\nexport default Chart;\nvar _c;\n$RefreshReg$(_c, \"Chart\");","map":{"version":3,"names":["React","useEffect","useState","useQuery","axios","ChartComponent","jsxDEV","_jsxDEV","getData","data","get","flattenedData","reduce","acc","curr","concat","Chart","_s","_filteredData$3","_filteredData$4","_filteredData$5","_filteredData$6","_filteredData$7","_filteredData$8","_filteredData$9","allData","isLoading","searchTerm","setSearchTerm","lat","setLat","long","setLong","filteredData","setFilteredData","timerId","setTimeout","filtered","filter","el","_el$country","country","toLowerCase","includes","length","_filteredData$","_filteredData$$countr","_filteredData$2","_filteredData$2$count","countryInfo","clearTimeout","children","fileName","_jsxFileName","lineNumber","columnNumber","console","log","className","type","placeholder","value","onChange","e","target","active","recovered","deaths","activeCases","recoveredCases","deathCases","_c","$RefreshReg$"],"sources":["/Users/gauravsinghmehra/Downloads/taiyo-ai/src/Pages/Chart.tsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useQuery } from \"react-query\";\nimport axios from \"axios\";\nimport { MapContainer, TileLayer, Marker, Popup, useMap } from \"react-leaflet\";\n\nimport \"leaflet/dist/leaflet.css\";\nimport ChartComponent from \"../Components/ChartComponent\";\nexport interface CountryDataType {\n  active: number;\n  activePerOneMillion: number;\n  cases: number;\n  casesPerOneMillion: number;\n  continent: string;\n  country: string;\n  countryInfo: {\n    flag: string;\n    iso2: string;\n    iso3: string;\n    lat: number;\n    long: number;\n    _id: number;\n  };\n  critical: number;\n  criticalPerOneMillion: number;\n  deaths: number;\n  deathsPerOneMillion: number;\n  oneCasePerPeople: number;\n  oneDeathPerPeople: number;\n  oneTestPerPeople: number;\n  population: number;\n  recovered: number;\n  recoveredPerOneMillion: number;\n  tests: number;\n  testsPerOneMillion: number;\n  todayCases: number;\n  todayDeaths: number;\n  todayRecovered: number;\n  updated: number;\n}\n\nconst getData = async (): Promise<CountryDataType[]> => {\n  const { data } = await axios.get<CountryDataType[]>(\n    \"https://disease.sh/v3/covid-19/countries\"\n  );\n  const flattenedData = data.reduce(\n    (acc: CountryDataType[], curr: CountryDataType) => acc.concat([curr]),\n    []\n  );\n  // const countryLatLng: { [key: string]: LatLngExpression } = {};\n  // data.forEach((item) => {\n  //   countryLatLng[item.countryInfo.iso2] = [\n  //     item.countryInfo.lat,\n  //     item.countryInfo.long,\n  //   ];\n  // });\n  // return flattenedData.map((item) => ({\n  //   ...item,\n  //   latlng: countryLatLng[item.countryInfo.iso2],\n  // }));\n  return flattenedData;\n};\nconst Chart = () => {\n  const { data: allData, isLoading } = useQuery<CountryDataType[]>(\n    \"countryData\",\n    getData\n  );\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [lat, setLat] = useState<number | null>(null);\n  const [long, setLong] = useState<number | null>(null);\n  const [filteredData, setFilteredData] = useState<CountryDataType[]>([]);\n  useEffect(() => {\n    const timerId = setTimeout(() => {\n      const filtered = allData?.filter((el) => {\n        return el?.country?.toLowerCase().includes(searchTerm.toLowerCase());\n      });\n      setFilteredData(filtered || []);\n    }, 500);\n\n    if (filteredData.length === 1) {\n      setLat(filteredData[0]?.countryInfo?.lat);\n      setLong(filteredData[0]?.countryInfo?.long);\n    } else {\n      setLat(null);\n      setLong(null);\n    }\n    return () => clearTimeout(timerId);\n  }, [searchTerm, allData]);\n\n  if (isLoading) {\n    return <div>Loading...</div>;\n  }\n  console.log(\"Data\", filteredData);\n\n  return (\n    <div className=\"flex flex-col bg-gray-800 justify-center items-center w-full h-100 px-4 py-14 gap-4\">\n      <input\n        type=\"text\"\n        placeholder=\"Search By Country\"\n        value={searchTerm}\n        className=\"px-2 py-2 border rounded\"\n        onChange={(e) => setSearchTerm(e.target.value)}\n      />\n\n      {filteredData && filteredData.length === 1 ? (\n        <div className=\"border px-4 py-4 bg-white rounded flex-col gap-4\">\n          <p>{filteredData[0]?.country}</p>\n          <p>Active Cases: {filteredData[0]?.active}</p>\n          <p>Recovered Cases: {filteredData[0]?.recovered}</p>\n          <p>Deaths Cases: {filteredData[0]?.deaths}</p>\n          <ChartComponent activeCases={filteredData[0]?.active} recoveredCases={filteredData[0]?.recovered} deathCases={filteredData[0]?.deaths} />\n        </div>\n      ) : (\n        <div>\n          <p>No data Found.</p>\n          <div className=\"flex flex-col bg-gray-800 text-white justify-center items-center w-full h-100\"></div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Chart;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}