{"ast":null,"code":"import _slicedToArray from\"/Users/gauravsinghmehra/Downloads/taiyo-ai/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/Users/gauravsinghmehra/Downloads/taiyo-ai/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/gauravsinghmehra/Downloads/taiyo-ai/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React,{useEffect,useState}from\"react\";import{useQuery}from\"react-query\";import axios from\"axios\";import\"leaflet/dist/leaflet.css\";import ChartComponent from\"../Components/ChartComponent\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var getData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$axios$get,data,flattenedData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"https://disease.sh/v3/covid-19/countries\");case 2:_yield$axios$get=_context.sent;data=_yield$axios$get.data;flattenedData=data.reduce(function(acc,curr){return acc.concat([curr]);},[]);// const countryLatLng: { [key: string]: LatLngExpression } = {};\n// data.forEach((item) => {\n//   countryLatLng[item.countryInfo.iso2] = [\n//     item.countryInfo.lat,\n//     item.countryInfo.long,\n//   ];\n// });\n// return flattenedData.map((item) => ({\n//   ...item,\n//   latlng: countryLatLng[item.countryInfo.iso2],\n// }));\nreturn _context.abrupt(\"return\",flattenedData);case 6:case\"end\":return _context.stop();}},_callee);}));return function getData(){return _ref.apply(this,arguments);};}();var Chart=function Chart(){var _filteredData$3,_filteredData$4,_filteredData$5,_filteredData$6,_filteredData$7,_filteredData$8,_filteredData$9;var _useQuery=useQuery(\"countryData\",getData),allData=_useQuery.data,isLoading=_useQuery.isLoading;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),searchTerm=_useState2[0],setSearchTerm=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),lat=_useState4[0],setLat=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),long=_useState6[0],setLong=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),filteredData=_useState8[0],setFilteredData=_useState8[1];useEffect(function(){var timerId=setTimeout(function(){var filtered=allData===null||allData===void 0?void 0:allData.filter(function(el){var _el$country;return el===null||el===void 0?void 0:(_el$country=el.country)===null||_el$country===void 0?void 0:_el$country.toLowerCase().includes(searchTerm.toLowerCase());});setFilteredData(filtered||[]);},500);if(filteredData.length===1){var _filteredData$,_filteredData$$countr,_filteredData$2,_filteredData$2$count;setLat((_filteredData$=filteredData[0])===null||_filteredData$===void 0?void 0:(_filteredData$$countr=_filteredData$.countryInfo)===null||_filteredData$$countr===void 0?void 0:_filteredData$$countr.lat);setLong((_filteredData$2=filteredData[0])===null||_filteredData$2===void 0?void 0:(_filteredData$2$count=_filteredData$2.countryInfo)===null||_filteredData$2$count===void 0?void 0:_filteredData$2$count.long);}else{setLat(null);setLong(null);}return function(){return clearTimeout(timerId);};},[searchTerm,allData]);if(isLoading){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}console.log(\"Data\",filteredData);return/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col bg-gray-800 justify-center items-center w-full h-100 px-4 py-14 gap-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search By Country\",value:searchTerm,className:\"px-2 py-2 border rounded\",onChange:function onChange(e){return setSearchTerm(e.target.value);}}),filteredData&&filteredData.length===1?/*#__PURE__*/_jsxs(\"div\",{className:\"border px-4 py-4 bg-white rounded flex-col gap-4\",children:[/*#__PURE__*/_jsx(\"p\",{children:(_filteredData$3=filteredData[0])===null||_filteredData$3===void 0?void 0:_filteredData$3.country}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Active Cases: \",(_filteredData$4=filteredData[0])===null||_filteredData$4===void 0?void 0:_filteredData$4.active]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Recovered Cases: \",(_filteredData$5=filteredData[0])===null||_filteredData$5===void 0?void 0:_filteredData$5.recovered]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Deaths Cases: \",(_filteredData$6=filteredData[0])===null||_filteredData$6===void 0?void 0:_filteredData$6.deaths]}),/*#__PURE__*/_jsx(ChartComponent,{activeCases:(_filteredData$7=filteredData[0])===null||_filteredData$7===void 0?void 0:_filteredData$7.active,recoveredCases:(_filteredData$8=filteredData[0])===null||_filteredData$8===void 0?void 0:_filteredData$8.recovered,deathCases:(_filteredData$9=filteredData[0])===null||_filteredData$9===void 0?void 0:_filteredData$9.deaths})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-white\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"No data Found.\"}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-800 text-white justify-center items-center w-full h-screen\"})]})]});};export default Chart;","map":{"version":3,"names":["React","useEffect","useState","useQuery","axios","ChartComponent","jsx","_jsx","jsxs","_jsxs","getData","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$axios$get","data","flattenedData","wrap","_callee$","_context","prev","next","get","sent","reduce","acc","curr","concat","abrupt","stop","apply","arguments","Chart","_filteredData$3","_filteredData$4","_filteredData$5","_filteredData$6","_filteredData$7","_filteredData$8","_filteredData$9","_useQuery","allData","isLoading","_useState","_useState2","_slicedToArray","searchTerm","setSearchTerm","_useState3","_useState4","lat","setLat","_useState5","_useState6","long","setLong","_useState7","_useState8","filteredData","setFilteredData","timerId","setTimeout","filtered","filter","el","_el$country","country","toLowerCase","includes","length","_filteredData$","_filteredData$$countr","_filteredData$2","_filteredData$2$count","countryInfo","clearTimeout","children","console","log","className","type","placeholder","value","onChange","e","target","active","recovered","deaths","activeCases","recoveredCases","deathCases"],"sources":["/Users/gauravsinghmehra/Downloads/taiyo-ai/src/Pages/Chart.tsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useQuery } from \"react-query\";\nimport axios from \"axios\";\nimport { MapContainer, TileLayer, Marker, Popup, useMap } from \"react-leaflet\";\n\nimport \"leaflet/dist/leaflet.css\";\nimport ChartComponent from \"../Components/ChartComponent\";\nexport interface CountryDataType {\n  active: number;\n  activePerOneMillion: number;\n  cases: number;\n  casesPerOneMillion: number;\n  continent: string;\n  country: string;\n  countryInfo: {\n    flag: string;\n    iso2: string;\n    iso3: string;\n    lat: number;\n    long: number;\n    _id: number;\n  };\n  critical: number;\n  criticalPerOneMillion: number;\n  deaths: number;\n  deathsPerOneMillion: number;\n  oneCasePerPeople: number;\n  oneDeathPerPeople: number;\n  oneTestPerPeople: number;\n  population: number;\n  recovered: number;\n  recoveredPerOneMillion: number;\n  tests: number;\n  testsPerOneMillion: number;\n  todayCases: number;\n  todayDeaths: number;\n  todayRecovered: number;\n  updated: number;\n}\n\nconst getData = async (): Promise<CountryDataType[]> => {\n  const { data } = await axios.get<CountryDataType[]>(\n    \"https://disease.sh/v3/covid-19/countries\"\n  );\n  const flattenedData = data.reduce(\n    (acc: CountryDataType[], curr: CountryDataType) => acc.concat([curr]),\n    []\n  );\n  // const countryLatLng: { [key: string]: LatLngExpression } = {};\n  // data.forEach((item) => {\n  //   countryLatLng[item.countryInfo.iso2] = [\n  //     item.countryInfo.lat,\n  //     item.countryInfo.long,\n  //   ];\n  // });\n  // return flattenedData.map((item) => ({\n  //   ...item,\n  //   latlng: countryLatLng[item.countryInfo.iso2],\n  // }));\n  return flattenedData;\n};\nconst Chart = () => {\n  const { data: allData, isLoading } = useQuery<CountryDataType[]>(\n    \"countryData\",\n    getData\n  );\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const [lat, setLat] = useState<number | null>(null);\n  const [long, setLong] = useState<number | null>(null);\n  const [filteredData, setFilteredData] = useState<CountryDataType[]>([]);\n  useEffect(() => {\n    const timerId = setTimeout(() => {\n      const filtered = allData?.filter((el) => {\n        return el?.country?.toLowerCase().includes(searchTerm.toLowerCase());\n      });\n      setFilteredData(filtered || []);\n    }, 500);\n\n    if (filteredData.length === 1) {\n      setLat(filteredData[0]?.countryInfo?.lat);\n      setLong(filteredData[0]?.countryInfo?.long);\n    } else {\n      setLat(null);\n      setLong(null);\n    }\n    return () => clearTimeout(timerId);\n  }, [searchTerm, allData]);\n\n  if (isLoading) {\n    return <div>Loading...</div>;\n  }\n  console.log(\"Data\", filteredData);\n\n  return (\n    <div className=\"flex flex-col bg-gray-800 justify-center items-center w-full h-100 px-4 py-14 gap-4\">\n      <input\n        type=\"text\"\n        placeholder=\"Search By Country\"\n        value={searchTerm}\n        className=\"px-2 py-2 border rounded\"\n        onChange={(e) => setSearchTerm(e.target.value)}\n      />\n\n      {filteredData && filteredData.length === 1 ? (\n        <div className=\"border px-4 py-4 bg-white rounded flex-col gap-4\">\n          <p>{filteredData[0]?.country}</p>\n          <p>Active Cases: {filteredData[0]?.active}</p>\n          <p>Recovered Cases: {filteredData[0]?.recovered}</p>\n          <p>Deaths Cases: {filteredData[0]?.deaths}</p>\n          <ChartComponent activeCases={filteredData[0]?.active} recoveredCases={filteredData[0]?.recovered} deathCases={filteredData[0]?.deaths} />\n        </div>\n      ) : (\n        <div className=\"text-white\">\n          <p>No data Found.</p>\n          <div className=\"bg-gray-800 text-white justify-center items-center w-full h-screen\" ></div>\n        </div> \n      )}\n    </div>\n  );\n};\n\nexport default Chart;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}